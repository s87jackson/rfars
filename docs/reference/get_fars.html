<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get FARS data — get_fars • rfars</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get FARS data — get_fars"><meta name="description" content="Bring FARS data into the current environment, whether by downloading it anew
    or by using pre-existing files."><meta property="og:description" content="Bring FARS data into the current environment, whether by downloading it anew
    or by using pre-existing files."><meta property="og:image" content="https://s87jackson.github.io/rfars/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rfars</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Alcohol_Counts.html">Alcohol Counts</a></li>
    <li><a class="dropdown-item" href="../articles/Counts.html">Counts</a></li>
    <li><a class="dropdown-item" href="../articles/Crash_sequence_of_events.html">Crash Sequence of Events</a></li>
    <li><a class="dropdown-item" href="../articles/Searchable_Codebooks.html">Searchable Codebooks</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/s87jackson/rfars/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Get FARS data</h1>
      <small class="dont-index">Source: <a href="https://github.com/s87jackson/rfars/blob/HEAD/R/get_fars.R" class="external-link"><code>R/get_fars.R</code></a></small>
      <div class="d-none name"><code>get_fars.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Bring FARS data into the current environment, whether by downloading it anew
    or by using pre-existing files.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_fars</span><span class="op">(</span></span>
<span>  years <span class="op">=</span> <span class="fl">2014</span><span class="op">:</span><span class="fl">2023</span>,</span>
<span>  states <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"zenodo"</span>, <span class="st">"nhtsa"</span><span class="op">)</span>,</span>
<span>  proceed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-years">years<a class="anchor" aria-label="anchor" href="#arg-years"></a></dt>
<dd><p>Years to be downloaded, in yyyy (character or numeric formats,
defaults to last 10 years).</p></dd>


<dt id="arg-states">states<a class="anchor" aria-label="anchor" href="#arg-states"></a></dt>
<dd><p>States to keep. Leave as NULL (the default) to keep
all states. Can be specified as full state name (e.g. "Virginia"),
abbreviation ("VA"), or FIPS code (51).</p></dd>


<dt id="arg-source">source<a class="anchor" aria-label="anchor" href="#arg-source"></a></dt>
<dd><p>The source of the data: 'zenodo' (the default) pulls the prepared
dataset from <a href="https://zenodo.org/records/17162673" class="external-link">Zenodo</a>, 'nhtsa'
pulls the raw files from NHTSA's FTP site and prepares them on your machine.
'zenodo' is much faster and provides the same dataset produced by using source='nhtsa'.</p></dd>


<dt id="arg-proceed">proceed<a class="anchor" aria-label="anchor" href="#arg-proceed"></a></dt>
<dd><p>Logical, whether or not to proceed with downloading files without
asking for user permission (defaults to FALSE, thus asking permission)</p></dd>


<dt id="arg-dir">dir<a class="anchor" aria-label="anchor" href="#arg-dir"></a></dt>
<dd><p>Directory in which to search for or save a 'FARS data' folder. If
NULL (the default), files are downloaded and unzipped to temporary
directories and prepared in memory. Ignored if source = 'zenodo'.</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>The name of an RDS file to save or use. If the specified file (e.g., 'myFARS.rds')
exists in 'dir' it will be returned; if not, an RDS file of this name will be
saved in 'dir' for quick use in subsequent calls. Ignored if source = 'zenodo'.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A FARS data object (list of six tibbles: flat, multi_acc,
   multi_veh, multi_per, events, and codebook), described below.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function provides the FARS database for the specified years and states.
   By default, it pulls from a Zenodo repository for speed and memory efficiency.
   It can also pull the raw files from <a href="https://www.nhtsa.gov/file-downloads?p=nhtsa/downloads/" class="external-link">NHTSA</a> and process them in memory, or
   use an RDS file saved on your machine.</p>
<p>If source = 'nhtsa' and no directory (dir) is specified, SAS files are downloaded into a
   tempdir(), where they are also prepared, combined, and then brought into
   the current environment. If you specify a directory (dir), the function will
   look there for a 'FARS data' folder. If not found, it will be created and
   populated with raw and prepared SAS and RDS files, otherwise the
   function makes sure all requested years are present and asks permission
   to download any missing years.</p>
<p>The object returned is a list with class 'FARS'. It contains six tibbles:
   flat, multi_acc, multi_veh, multi_per, events, and codebook.</p>
<p>Flat files are wide-formatted and presented at the person level.
   All <em>crashes</em> involve at least one motor <em>vehicle</em>, each of
   which may contain one or multiple <em>people</em>. These are the three
   entities of crash data. The flat files therefore repeat some data elements
   across multiple rows. Please conduct your analysis with your entity in mind.</p>
<p>Some data elements can include multiple values for any data level
   (e.g., multiple weather conditions corresponding to the crash, or multiple
   crash factors related to vehicle or person). These elements have been
   collected in the yyyy_multi_[acc/veh/per].rds files in long format.
   These files contain crash, vehicle, and person identifiers, and two
   variables labelled <code>name</code> and <code>value</code>. These correspond to
   variable names from the raw data files and the corresponding values,
   respectively.</p>
<p>The events tibble provides a sequence of events for all vehicles involved
   in the crash. See Crash Sequences vignette for an example.</p>
<p>Finally, the codebook tibble serves as a searchable codebook for all files of any given year.</p>
<p>Please review the <a href="https://crashstats.nhtsa.dot.gov/Api/Public/ViewPublication/813706" class="external-link">FARS Analytical User's Manual</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>    <span class="va">myFARS</span> <span class="op">&lt;-</span> <span class="fu">get_fars</span><span class="op">(</span>years <span class="op">=</span> <span class="fl">2021</span>, states <span class="op">=</span> <span class="st">"VA"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Jackson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

